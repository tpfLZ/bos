<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>会员登录</title>
<link rel="stylesheet" href="/productShow/css/bootstrap.min.css"
	type="text/css" />
<script src="/productShow/js/jquery-1.11.3.min.js"
	type="text/javascript"></script>
<script src="/productShow/js/bootstrap.min.js" type="text/javascript"></script>
<!-- 引入自定义css文件 style.css -->
<link rel="stylesheet" href="/productShow/css/style.css" type="text/css" />

<style>
body {
	margin-top: 20px;
	margin: 0 auto;
	width: 100%;
}

.carousel-inner .item img {
	width: 100%;
	height: 300px;
}
</style>

<script type="text/javascript">
	var pageNo = 1;
	var pageSize = 12;
	var totalProduct;
	var totalPage = 0;
	var url = "/productShow/ProductServlet";
	$(function() {
		changePage(pageNo);
	});

	function changePage(pageNo) {
		$
				.get(
						url,
						{
							"pageNo" : pageNo,
							"pageSize" : pageSize
						},
						function(data) {
							$("#body").html("");
							$(".pagination li").remove(":not(:first,:last)");
							var productList = data.productList;
							totalPage = data.totalPage;
							
							var html = "";
							for (var i = 0; i < productList.length; i++) {
								var parameter = "/productShow/ProductInfoServlet?";
								parameter += "pname="+productList[i].pname+"&"+"pid="+productList[i].pid+"&"+"market_price="+productList[i].market_price+"&"+"shop_price="+productList[i].shop_price+"&"+"pimage="+productList[i].pimage;
								html += "<div class='col-md-2'><a href='"+parameter+"'> <img src='"+productList[i].pimage+"'width='170' height='170' style='display: inline-block;'></a><p><a href='product_info.html' style='color: green'>"
										+ productList[i].pname
										+ "</a></p><p><font color='#FF0000'>商城价：&yen;"
										+ productList[i].market_price
										+ "</font></p></div>";
							}
							$("#body").append(html);
							
							if(pageNo==1){
								$("#li").addClass("disabled");
								$("#li").removeAttr("onclick");
							}else{
								$("#li").removeClass("disabled");
								$("#li").attr("onclick","prePage()");
							}
							
							if(pageNo==totalPage){
								$("#oi").addClass("disabled");
								$("#oi").removeAttr("onclick");
							}else{
								$("#oi").removeClass("disabled");
								$("#oi").attr("onclick","nextPage()");
							}

							var li = "";
							for (var i = 1; i <= totalPage; i++) {
								if (i == pageNo) {
									li += "<li class = 'active'><a href='javascript:void(0)' onclick='changePage("
											+ i + ")'>" + i + "</a></li>";
								} else {
									li += "<li><a href='javascript:void(0)' onclick='changePage("
											+ i + ")'>" + i + "</a></li>";
								}
							}
							$("#li").after(li);
						}, "json");
	}
	
	function prePage(){
		var id = $(".active").index();
		changePage(id-1);
	}
	
	function nextPage(){
		var id = $(".active").index();
		changePage(id+1);
	}
</script>
</head>

<body>

	<div class="row" style="width: 1210px; margin: 0 auto;">
		<div class="col-md-12">
			<ol class="breadcrumb">
				<li><a href="#">首页</a></li>
			</ol>
		</div>
       <div id="body">
       </div>
	</div>

	<!--分页 -->
	<div style="width: 380px; margin: 0 auto; margin-top: 50px;">
		<ul class="pagination" style="text-align: center; margin-top: 10px;">
			<li id="li" onclick="prePage()"><a href="#" aria-label="Previous"><span
					aria-hidden="true">&laquo;</span></a></li>

			<li id="oi" onclick="nextPage()"><a href="#" aria-label="Next"> <span aria-hidden="true">&raquo;</span>
			</a></li>
		</ul>
	</div>
	<!-- 分页结束 -->

</body>

</html>